(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{371:function(t,e,r){var content=r(440);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(13).default)("4c7ce580",content,!0,{sourceMap:!1})},439:function(t,e,r){"use strict";var n=r(371);r.n(n).a},440:function(t,e,r){var n=r(12),o=r(326),l=r(441);e=n(!1);var c=o(l);e.push([t.i,"#btn-bayar[data-v-0887d468]{position:relative;margin:5px;right:0;left:0;bottom:0}.bg-payment[data-v-0887d468]{background:url("+c+") no-repeat;background-size:contain;background-position:bottom}.transparent[data-v-0887d468]{background:hsla(0,0%,100%,.8)!important}",""]),t.exports=e},441:function(t,e,r){t.exports=r.p+"img/ee6828f.svg"},463:function(t,e,r){"use strict";r.r(e);r(57),r(37);var n=r(11),o={data:function(){return{header_produk:[{text:"Nomor Produk",value:"nomor_produk"},{text:"Nama Produk",value:"nama"},{text:"Jumlah",value:"jumlah"},{text:"Harga Satuan",value:"harga_satuan"},{text:"Harga Total",value:"harga_total"}],nomor_produk:"",siswa:{id:null,nama:null,nis:null,saldo_digitcard:null,saldo_total:null},sukses:{status:!1,msg:null},error:{status:!1,msg:null},detail:[],produk_dipilih:"",produk:[],toggleSearch:!0}},methods:{getSiswa:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.$axios.$get("siswa/"+t);case 3:n=r.sent,e.siswa=n,r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.error(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},getProduk:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.$axios.$get("produk/"+t);case 3:n=r.sent,(o=e.detail.find((function(t){return t.id==n.id})))?o.jumlah_beli+=1:(n.jumlah_beli=1,e.detail.push(n),console.log(n)),e.nomor_produk="",r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.error(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},harga:function(t){return t.harga_jual*t.jumlah_beli},hargaTotal:function(t){var e=0;return t.forEach((function(t){e+=t.harga_jual*t.jumlah_beli})),e},deleteItem:function(t){var e=this.detail.map((function(t){return t.id})).indexOf(t.id);this.detail.splice(e,1)},toggle:function(){this.toggleSearch=!toggleSearch},bayar:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var data,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0==t.detail.length){e.next=20;break}return e.prev=1,(data=t.siswa).detail=t.detail,e.next=6,t.$axios({method:"post",url:"/transaksi/detail",data:data});case 6:r=e.sent,console.log(r),t.sukses.status=!0,t.sukses.msg="Pembayaran berhasil",setTimeout((function(){t.$router.push("/pembayaran")}),2e3),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0),t.error.status=!0,t.error.msg="Saldo tidak mencukupi, silahkan hapus beberapa produk";case 18:e.next=22;break;case 20:t.error.status=!0,t.error.msg="Silahkan masukan produk terlebih dahulu";case 22:case"end":return e.stop()}}),e,null,[[1,13]])})))()},getAllProduk:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("produk");case 3:r=e.sent,t.produk=r.data,console.log(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},watch:{nomor_produk:function(t){t.length>=4&&this.getProduk(t)},produk_dipilih:function(t){this.getProduk(t)}},computed:{},mounted:function(){this.getAllProduk(),this.getSiswa(this.$route.params.nis),console.log(this.$route.params.nis)}},l=(r(439),r(43)),c=r(58),v=r.n(c),d=r(452),m=r(149),h=r(127),k=r(375),_=r(342),f=r(379),x=r(126),w=r(380),y=r(129),C=r(81),S=r(130),V=r(131),j=r(35),$=r(381),P=r(339),R=r(382),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bg-payment",staticStyle:{height:"70vh"}},[r("v-layout",{attrs:{column:""}},[r("v-flex",[r("v-row",{staticClass:"pb-3 px-2",attrs:{align:"center"}},[r("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.$router.go(-1)}}},[r("v-icon",[t._v("mdi-arrow-left")])],1),t._v(" "),r("span",{staticClass:"title"},[t._v("Pembayaran")])],1)],1),t._v(" "),r("v-flex",[r("v-card",{staticClass:"transparent"},[r("v-list-item",[r("v-list-item-avatar",[r("img",{attrs:{src:"https://www.cendekiabaznas.sch.id/wp-content/uploads/2017/12/cropped-Logo-SCB-300x300.png"}})]),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(t.siswa.nama))]),t._v(" "),r("v-list-item-subtitle",[t._v(t._s(t.siswa.nis))]),t._v(" "),r("v-list-item-subtitle",[t._v("Rp "+t._s(t.siswa.saldo_digitcard))])],1)],1)],1)],1),t._v(" "),r("v-flex",[r("v-row",{directives:[{name:"show",rawName:"v-show",value:t.toggleSearch,expression:"toggleSearch"}],staticClass:"py-0 my-0"},[r("v-col",{staticClass:"pr-0 py-0",attrs:{cols:"10"}},[r("v-autocomplete",{staticClass:"py-4",attrs:{autofocus:"",solo:"",label:"Cari produk","hide-details":"","item-value":"nomor",items:t.produk,"item-text":"nama"},model:{value:t.produk_dipilih,callback:function(e){t.produk_dipilih=e},expression:"produk_dipilih"}})],1),t._v(" "),r("v-col",{staticClass:"text-center my-auto pl-0",attrs:{cols:"2"}},[r("v-btn",{attrs:{tile:"",icon:"",color:"green",dark:""},on:{click:function(e){t.toggleSearch=!t.toggleSearch}}},[r("v-icon",[t._v("mdi-barcode-scan")])],1)],1)],1),t._v(" "),r("v-row",{directives:[{name:"show",rawName:"v-show",value:!t.toggleSearch,expression:"!toggleSearch"}],staticClass:"py-0 my-0"},[r("v-col",{staticClass:"pr-0 py-0",attrs:{cols:"10"}},[r("v-text-field",{staticClass:"py-4",attrs:{autofocus:"",label:"Masukan nomor produk",solo:"","hide-details":"","append-icon":"mdi-plus"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getProduk(t.nomor_produk)}},model:{value:t.nomor_produk,callback:function(e){t.nomor_produk=e},expression:"nomor_produk"}})],1),t._v(" "),r("v-col",{staticClass:"text-center my-auto pl-0",attrs:{cols:"2"}},[r("v-btn",{attrs:{tile:"",icon:"",color:"green",dark:""},on:{click:function(e){t.toggleSearch=!t.toggleSearch}}},[r("v-icon",[t._v("mdi-keyboard")])],1)],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-list",{staticClass:"transparent",staticStyle:{"min-height":"40vh"}},[0==t.detail.length?[r("v-row",{staticClass:"fill-height",attrs:{justify:"center",align:"center"}},[r("v-col",{staticClass:"text-center"},[r("div",{staticClass:"headline"},[t._v("Belum ada produk")]),t._v(" "),r("div",{staticClass:"subtitle"},[t._v("Silahkan masukan nomor produk")])])],1)]:t._e(),t._v(" "),t._l(t.detail,(function(e){return[r("div",{key:e.id},[r("v-list-item",{attrs:{"two-line":""}},[r("v-list-item-avatar",{staticClass:"my-auto"},[r("v-text-field",{staticClass:"text-center headline",attrs:{flat:""},model:{value:e.jumlah_beli,callback:function(r){t.$set(e,"jumlah_beli",r)},expression:"item.jumlah_beli"}})],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(e.nama))]),t._v(" "),r("v-list-item-subtitle",[t._v(t._s(e.nomor))]),t._v(" "),r("v-list-item-subtitle")],1),t._v(" "),r("v-list-item-content",{staticClass:"text-right"},[r("v-list-item-title",[t._v("Rp "+t._s(t.harga(e)))])],1),t._v(" "),r("v-list-item-action",[r("v-btn",{attrs:{icon:"",color:"red"},on:{click:function(r){return r.stopPropagation(),t.deleteItem(e)}}},[r("v-icon",[t._v("mdi-close")])],1)],1)],1),t._v(" "),r("v-divider")],1)]}))],2)],1),t._v(" "),r("v-flex",{staticClass:"transparent",attrs:{id:"btn-bayar"}},[r("v-list-item",[r("v-list-item-content",[r("v-list-item-title",[t._v("Jumlah")])],1),t._v(" "),r("v-list-item-content",{staticClass:"text-right"},[r("v-list-item-title",{staticClass:"headline"},[t._v("Rp. "+t._s(t.hargaTotal(t.detail)))])],1)],1),t._v(" "),r("v-btn",{attrs:{block:"",color:"primary"},on:{click:function(e){return e.stopPropagation(),t.bayar()}}},[t._v("Bayar")])],1)],1),t._v(" "),r("v-snackbar",{attrs:{color:"primary"},model:{value:t.sukses.status,callback:function(e){t.$set(t.sukses,"status",e)},expression:"sukses.status"}},[t._v("\n    "+t._s(t.sukses.msg)+"\n    "),r("v-btn",{attrs:{dark:"",icon:"",small:"",fab:""},on:{click:function(e){t.sukses.status=!1}}},[r("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),r("v-snackbar",{attrs:{color:"red"},model:{value:t.error.status,callback:function(e){t.$set(t.error,"status",e)},expression:"error.status"}},[t._v("\n    "+t._s(t.error.msg)+"\n    "),r("v-btn",{attrs:{dark:"",icon:"",small:"",fab:""},on:{click:function(e){t.error.status=!1}}},[r("v-icon",[t._v("mdi-close")])],1)],1)],1)}),[],!1,null,"0887d468",null);e.default=component.exports;v()(component,{VAutocomplete:d.a,VBtn:m.a,VCard:h.a,VCol:k.a,VDivider:_.a,VFlex:f.a,VIcon:x.a,VLayout:w.a,VList:y.a,VListItem:C.a,VListItemAction:S.a,VListItemAvatar:V.a,VListItemContent:j.a,VListItemSubtitle:j.b,VListItemTitle:j.c,VRow:$.a,VSnackbar:P.a,VTextField:R.a})}}]);